# 对网络流量抓包的数据分析<br>
## 问题介绍<br>
对不同条件下抓到的流量包进行数据分析，期望获得不同场景对流量包发送的结果是否有影响及影响权重，抓包的实验过程[参考此处](https://github.com/xlxingRun/tcp-capture "流量抓包实验")。<br>

## 实验方法<br>
抓到的包主要在拥塞控制算法、拥塞控制窗口大小以及抓包时间上存在差异，即采用控制变量的方法探究流量包的差异性。<br>
考虑从两个方面去处理：<br>
1. 从宏观来看包之间有无明显差异,暂时用**总流量的均值和方差**来评价差异性，因为没找到更合适的衡量参数。<br>
2. 从微观来看，即对比每秒抓到的流量包大小来判断是否存在差异。<br>

## 实验内容<br>
### 1.宏观处理<br>
主要对比流量数据的均值和方差来体现差异性<br>
```python
import nupmy as np
np.mean()#计算均值
np.var()#计算总体方差
```
对抓取数据的处理结果放在out文件夹里，依次为抓取文件名、均值、方差以及流量数据


### 2.微观处理<br>
#### 说明 ####
微观处理是相对于宏观来说的，抓取的流量数据为1s内传输的总数据包。<br>
也就是说对数据做分析的时间刻度为1s，不知道1s内具体的传输过程，不能完全体现数流量传输的差异性。<br>


#### 实验方法 ####
首先判断流量数据是否遵循正态分布，因为有些相关性分析方法的前置要求是数据遵循正态分布，比如方差分析。<br>
python的scipy.stats库有很多检验数据是否正态分布的方法，这里选用scipy.stats.shapiro()方法。<br>
scipy.stats.shapiro()返回

```python
scipy.stats.shapiro(data[i])
```
```python
ShapiroResult(statistic=0.8377856016159058, pvalue=4.5533374427843086e-17)
#第一个返回值是统计量，第二个返回值是p，当p值大于指定的显著性水平，则接受原假设，即数据呈正态分布。
```

对所有数据做正态分布检验，绝大多数样本不符合正态分布，所以采用非正态分布数据的相关性分析方法。<br>


调研过后选用斯皮尔曼(Spearman)相关系数，但有个疑问。斯皮尔曼相关系数是一种“秩相关”的度量指标，但流量数据是时间敏感型数据，不知道适不适合用来评价相关性。
```python
from scipy.stats import spearmanr
spearmanr()
#第一个返回值在-1到1之间，符号表示两序列之间的正负相关关系，绝对值越接近1表示相关性越高
#第二个返回值是p，表示由完全不相关系统所生成的数据能够计算得出跟当前待测数据对所计算结果相当的斯皮尔曼相关系数的概率有多大
```

## 有可能的改进方案<br>
1. 抓包的时间刻度缩小到毫秒级别，秒级的时间刻度太大了，不足以体现流量特性
2. 个人感觉流量分析有点类似于股票分析、房价分析之类的，是不是可以从时间序列模型分析的角度去考虑，以上的实验都是从向量的角度去看待数据的





